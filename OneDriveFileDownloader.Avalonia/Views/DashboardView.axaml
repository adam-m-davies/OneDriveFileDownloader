<?xml version="1.0" encoding="utf-8"?>
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="OneDriveFileDownloader.Avalonia.Views.DashboardView">
  <Grid RowDefinitions="Auto, Auto, *">
    <TextBlock Grid.Row="0" Text="Dashboard" FontSize="24" FontWeight="SemiBold" Margin="0,0,0,16" />
    
    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="12" Margin="0,0,0,24">
      <Button Content="Open downloads folder" Command="{Binding OpenDownloadsCommand}" Classes="accent">
        <StackPanel Orientation="Horizontal" Spacing="8">
          <TextBlock Text="" FontFamily="Segoe MDL2 Assets" VerticalAlignment="Center" />
          <TextBlock Text="Open Downloads" VerticalAlignment="Center" />
        </StackPanel>
      </Button>
      <Button Command="{Binding ScanLastCommand}">
        <StackPanel Orientation="Horizontal" Spacing="8">
          <TextBlock Text="" FontFamily="Segoe MDL2 Assets" VerticalAlignment="Center" />
          <TextBlock Text="Scan Last Shared" VerticalAlignment="Center" />
        </StackPanel>
      </Button>
    </StackPanel>

    <StackPanel Grid.Row="2" Spacing="8">
      <TextBlock Text="Recent Downloads" FontWeight="SemiBold" FontSize="16" />
      <ListBox x:Name="RecentList" ItemsSource="{Binding RecentDownloads}" Background="Transparent" BorderThickness="0">
        <ListBox.ItemTemplate>
          <DataTemplate>
            <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="4" Margin="0,2" Padding="12">
              <Grid ColumnDefinitions="Auto, *, Auto">
                <TextBlock Grid.Column="0" Text="" FontFamily="Segoe MDL2 Assets" VerticalAlignment="Center" Margin="0,0,16,0" Foreground="{DynamicResource SystemAccentColor}" />
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                  <TextBlock Text="{Binding FileName}" FontWeight="Medium" />
                  <TextBlock Text="{Binding LocalPath}" FontSize="11" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" TextTrimming="CharacterEllipsis" />
                </StackPanel>
                <TextBlock Grid.Column="2" Text="{Binding DownloadedAtUtc, StringFormat='{}{0:yyyy-MM-dd HH:mm}'}" FontSize="11" VerticalAlignment="Center" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
              </Grid>
            </Border>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>
    </StackPanel>
  </Grid>
</UserControl>
