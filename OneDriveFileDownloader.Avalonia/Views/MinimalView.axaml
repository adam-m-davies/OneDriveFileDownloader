<?xml version="1.0" encoding="utf-8"?>
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="OneDriveFileDownloader.Avalonia.Views.MinimalView">
  <StackPanel Margin="8">
    <TextBlock Text="Minimal" FontSize="18" FontWeight="Bold" />
    <ListBox Name="VideosList" ItemsSource="{Binding Videos}" SelectedItem="{Binding SelectedVideo, Mode=TwoWay}" Height="400">
      <ListBox.ItemTemplate>
        <DataTemplate>
          <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center" AutomationProperties.Name="{Binding File.Name}">
            <Ellipse Width="12" Height="12" Fill="{Binding Status, Converter={StaticResource StatusToBrushConverter}}" VerticalAlignment="Center" Margin="0,0,6,0" />
            <TextBlock Text="{Binding File.Name}" Width="220" />
            <ProgressBar Width="120" Height="16" Minimum="0" Maximum="100" Value="{Binding Progress}" VerticalAlignment="Center" />
            <TextBlock Text="{Binding Progress, StringFormat='{}{0:N0}%'}" Margin="8,0,0,0" VerticalAlignment="Center" />
            <TextBlock Text="{Binding Path=Status, Converter={StaticResource StatusToGlyphConverter}}" Margin="8,0,0,0" VerticalAlignment="Center" FontSize="16" />
            <TextBlock Text="{Binding Status}" Margin="4,0,0,0" VerticalAlignment="Center" />
            <TextBlock Text="{Binding EstimatedSecondsRemaining, Converter={StaticResource SecondsToEtaConverter}}" Margin="8,0,0,0" VerticalAlignment="Center" />
            <TextBlock Text="{Binding RetryCount, StringFormat='Retries: {0}'}" Margin="8,0,0,0" VerticalAlignment="Center" />
            <Button Content="âµ" ToolTip.Tip="Download" Command="{Binding DataContext.DownloadCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" IsEnabled="{Binding IsDownloading, Converter={StaticResource InverseBoolConverter}}" AutomationProperties.Name="Download" />
            <Button Content="âœ–" ToolTip.Tip="Cancel" Command="{Binding DataContext.CancelCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" IsVisible="{Binding IsDownloading}" AutomationProperties.Name="Cancel download" />
            <Button Content="ðŸ”" ToolTip.Tip="Retry" Command="{Binding DataContext.RetryCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" IsEnabled="{Binding IsRetryAllowed}" AutomationProperties.Name="Retry download" />
          </StackPanel>
        </DataTemplate>
      </ListBox.ItemTemplate>
    </ListBox>
    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
      <Button Content="Download Selected" Command="{Binding DownloadCommand}" CommandParameter="{Binding SelectedVideo}" />
      <TextBlock Text="{Binding StatusText}" Margin="12,6,0,0" VerticalAlignment="Center" />
    </StackPanel>
  </StackPanel>
</UserControl>
